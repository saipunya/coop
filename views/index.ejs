<%- include('header') %>
    <!-- Navigation-->
    <nav id="mainNav" class="navbar navbar-expand-lg navbar-light bg-light shadow-sm" role="navigation" aria-label="หลัก">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand fw-bold" href="/">Coop Chain System</a>
            <!-- ปุ่ม toggle ต้องมี .navbar-toggler-icon อยู่ภายใน -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="#!">หน้าแรก</a></li>
                    <li class="nav-item"><a class="nav-link" href="#!">เกี่ยวกับเรา</a></li>
                    <li class="nav-item"><a class="nav-link" href="#features">ฟีเจอร์</a></li>
                    <li class="nav-item"><a class="nav-link" href="#modules">โมดูล</a></li>
                    <li class="nav-item"><a class="nav-link" href="#stats">สถิติ</a></li>
                </ul>
                <div class="d-flex gap-2">
                    <a class="btn btn-outline-primary btn-sm d-inline-flex align-items-center px-3" href="/app/login" aria-label="เข้าสู่ระบบ">
                        <i class="bi-box-arrow-in-right" aria-hidden="true"></i>
                    </a>
                    <a class="btn btn-primary btn-sm d-inline-flex align-items-center px-3" href="/app/dashboard" aria-label="แดชบอร์ด">
                        <i class="bi-speedometer2" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Hero -->
    <section class="py-5">
      <div class="container">
        <div class="p-5 hero-gradient">
          <div class="row g-4 align-items-center">
            <div class="col-lg-6">
              <h1 class="fw-bold mb-3">เว็บไซต์สหกรณ์การเกษตร กอไก่ จำกัด</h1>
              <p class="lead mb-4">
                รวมศูนย์ข้อมูลสมาชิก หุ้น เงินฝาก เงินกู้ และประวัติรายการ ทำงานร่วมกับระบบบัญชีเดิม
                พร้อม PWA ใช้งานได้ทั้งออนไลน์และออฟไลน์
              </p>
              <div class="d-flex flex-wrap gap-3">
                <a href="/app/login" class="btn btn-light text-primary fw-semibold">
                  <i class="bi-rocket-takeoff"></i> เริ่มใช้งาน
                </a>
                <a href="#modules" class="btn btn-outline-light">
                  <i class="bi-puzzle"></i> ดูโมดูล
                </a>
              </div>
            </div>
            <div class="col-lg-6 text-center">
              <img src="images/CoopChainMain.png" class="img-fluid rounded shadow" alt="Coop Chain">
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features quick icons -->
    <section id="features" class="py-4">
      <div class="container">
        <div class="row g-4">
          <div class="col-6 col-md-3 text-center">
            <div class="feature-icon mb-2"><i class="bi-shield-check"></i></div>
            <small class="fw-semibold d-block">JWT + Bcrypt</small>
          </div>
          <div class="col-6 col-md-3 text-center">
            <div class="feature-icon mb-2"><i class="bi-database"></i></div>
            <small class="fw-semibold d-block">MySQL Pool</small>
          </div>
            <div class="col-6 col-md-3 text-center">
            <div class="feature-icon mb-2"><i class="bi-cloud-slash"></i></div>
            <small class="fw-semibold d-block">Offline PWA</small>
          </div>
          <div class="col-6 col-md-3 text-center">
            <div class="feature-icon mb-2"><i class="bi-shield-lock"></i></div>
            <small class="fw-semibold d-block">PDPA Ready</small>
          </div>
        </div>
      </div>
    </section>

    <!-- Modules (replaces Related products) -->
    <section id="modules" class="py-5 bg-light">
      <div class="container">
        <h2 class="fw-bold mb-4">โมดูลหลักของระบบ</h2>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3">
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-people text-primary"></i> ข้อมูลสมาชิก</h5>
                <p class="small mb-0">โปรไฟล์สมาชิก / การยินยอม / ติดต่อ</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-credit-card text-primary"></i> บัญชีหุ้น & เงินฝาก</h5>
                <p class="small mb-0">ยอดปัจจุบัน & ประวัติรายการ</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-cash-coin text-primary"></i> เงินกู้ / ชำระ</h5>
                <p class="small mb-0">ตารางชำระ & แจ้งเตือน (อนาคต)</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-card-checklist text-primary"></i> รายการธุรกรรม</h5>
                <p class="small mb-0">ดึงล่าสุด + แคชออฟไลน์</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-cloud-upload text-primary"></i> Sync / CSV Import</h5>
                <p class="small mb-0">อัปโหลดจากระบบบัญชีหลัก</p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h5 class="fw-bold"><i class="bi-lock text-primary"></i> ความปลอดภัย</h5>
                <p class="small mb-0">JWT Session + Rate Limit</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats placeholders -->
    <section id="stats" class="py-5">
      <div class="container">
        <h2 class="fw-bold mb-4">สถิติระบบ (ตัวอย่าง)</h2>
        <div class="row g-3">
          <div class="col-6 col-md-3">
            <div class="stat-box p-3 rounded border text-center">
              <div class="h5 mb-0" id="stat-members" aria-label="จำนวนสมาชิก">-</div>
              <small>สมาชิก</small>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-box p-3 rounded border text-center">
              <div class="h5 mb-0" id="stat-accounts" aria-label="จำนวนบัญชี">-</div>
              <small>บัญชี</small>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-box p-3 rounded border text-center">
              <div class="h5 mb-0" id="stat-transactions" aria-label="จำนวนธุรกรรม">-</div>
              <small>ธุรกรรม</small>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-box p-3 rounded border text-center">
              <div class="h5 mb-0" id="stat-health" aria-label="สถานะ API">-</div>
              <small>สถานะ API</small>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- React mount (kept hidden until SPA routes used) -->
    <div id="root" style="display:none"></div>

    <script>
      // Lightweight sample stats (replace with real endpoints later)
      fetch('/api/health').then(r=>r.json()).then(d=>{
        document.getElementById('stat-health').textContent = d.ok ? 'ปกติ' : 'มีปัญหา';
      }).catch(()=>document.getElementById('stat-health').textContent='ขัดข้อง');
      // Placeholder numbers:
      document.getElementById('stat-members').textContent = '—';
      document.getElementById('stat-accounts').textContent = '—';
      document.getElementById('stat-transactions').textContent = '—';
      // Enhance tap feedback on mobile
      if ('ontouchstart' in window) {
        document.body.classList.add('touch-device');
      }
    </script>
<%- include('footer') %>
